#include <iostream>
#include <Arduino.h>
#include <M5Unified.h>
#include <M5Cardputer.h>
#include <chrono>
#include <thread>


M5Canvas canvas(&M5Cardputer.Display);
int x = 12;
int y = 117;
int score = 0;
bool buttonPressed = false;
// put function declarations here:
int myFunction(int, int);


void setup() {
  auto cfg = M5.config();
  M5Cardputer.begin(cfg, true);
  M5Cardputer.Display.setRotation(1);
  M5Cardputer.Display.setTextSize(1);
  M5Cardputer.Display.setTextColor(PURPLE);
  M5Cardputer.Display.setCursor(8, 13);
  M5Cardputer.Display.printf("score = %d", score);
  M5Cardputer.Display.drawRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.fillRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.drawRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.fillRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.drawRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.fillRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.drawRect(103, 105, 31, 10, GREEN);
  M5Cardputer.Display.fillRect(103, 105, 31, 10, GREEN);
  M5Cardputer.Display.drawCircle(12, 117, 15, BLACK);
  M5Cardputer.Display.fillCircle(12, 117, 15, ORANGE);

}


void loop() {
  // put your main code here, to run repeatedly:
  M5Cardputer.update();
  std::this_thread::sleep_for(std::chrono::milliseconds(25));
  M5Cardputer.Display.clearDisplay();
  M5Cardputer.Display.setCursor(8, 13);
  M5Cardputer.Display.printf("score = %d", score);
  M5Cardputer.Display.drawRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.fillRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.drawRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.fillRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.drawRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.fillRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.drawRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.fillRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.drawCircle(22, 117, 15, BLACK);
  M5Cardputer.Display.fillCircle(22, 117, 15, ORANGE);
  std::this_thread::sleep_for(std::chrono::milliseconds(25));
  M5Cardputer.Display.clearDisplay();
  M5Cardputer.Display.setCursor(8, 13); 
  M5Cardputer.Display.printf("score = %d", score);
  M5Cardputer.Display.drawRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.fillRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.drawRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.fillRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.drawRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.fillRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.drawRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.fillRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.drawCircle(32, 117, 15, BLACK);
  M5Cardputer.Display.fillCircle(32, 117, 15, ORANGE);
  std::this_thread::sleep_for(std::chrono::milliseconds(25));
  M5Cardputer.Display.clearDisplay();
  M5Cardputer.Display.setCursor(8, 13);  
  M5Cardputer.Display.printf("score = %d", score);
  M5Cardputer.Display.drawRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.fillRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.drawRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.fillRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.drawRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.fillRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.drawRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.fillRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.drawCircle(42, 117, 15, BLACK);
  M5Cardputer.Display.fillCircle(42, 117, 15, ORANGE);
  std::this_thread::sleep_for(std::chrono::milliseconds(25));
  M5Cardputer.Display.clearDisplay();
  M5Cardputer.Display.setCursor(8, 13);  
  M5Cardputer.Display.printf("score = %d", score);
  M5Cardputer.Display.drawRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.fillRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.drawRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.fillRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.drawRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.fillRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.drawRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.fillRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.drawCircle(52, 117, 15, BLACK);
  M5Cardputer.Display.fillCircle(52, 117, 15, ORANGE);
  std::this_thread::sleep_for(std::chrono::milliseconds(25));
  M5Cardputer.Display.clearDisplay();
  M5Cardputer.Display.setCursor(8, 13);  
  M5Cardputer.Display.printf("score = %d", score);
  M5Cardputer.Display.drawRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.fillRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.drawRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.fillRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.drawRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.fillRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.drawRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.fillRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.drawCircle(62, 117, 15, BLACK);
  M5Cardputer.Display.fillCircle(62, 117, 15, ORANGE);
  std::this_thread::sleep_for(std::chrono::milliseconds(25));
  M5Cardputer.Display.clearDisplay();
  M5Cardputer.Display.setCursor(8, 13);  
  M5Cardputer.Display.printf("score = %d", score);
  M5Cardputer.Display.drawRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.fillRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.drawRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.fillRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.drawRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.fillRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.drawRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.fillRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.drawCircle(72, 117, 15, BLACK);
  M5Cardputer.Display.fillCircle(72, 117, 15, ORANGE);
  std::this_thread::sleep_for(std::chrono::milliseconds(25));
  M5Cardputer.Display.clearDisplay();
  M5Cardputer.Display.setCursor(8, 13);  
  M5Cardputer.Display.printf("score = %d", score);
  M5Cardputer.Display.drawRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.fillRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.drawRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.fillRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.drawRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.fillRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.drawRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.fillRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.drawCircle(82, 117, 15, BLACK);
  M5Cardputer.Display.fillCircle(82, 117, 15, ORANGE);
  std::this_thread::sleep_for(std::chrono::milliseconds(25));
  M5Cardputer.Display.clearDisplay();
  M5Cardputer.Display.setCursor(8, 13);  
  M5Cardputer.Display.printf("score = %d", score);
  M5Cardputer.Display.drawRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.fillRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.drawRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.fillRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.drawRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.fillRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.drawRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.fillRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.drawCircle(92, 117, 15, BLACK);
  M5Cardputer.Display.fillCircle(92, 117, 15, ORANGE);
  std::this_thread::sleep_for(std::chrono::milliseconds(95));
  M5Cardputer.Display.clearDisplay();
  M5Cardputer.Display.setCursor(8, 13);  
  M5Cardputer.Display.printf("score = %d", score);
  M5Cardputer.Display.drawRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.fillRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.drawRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.fillRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.drawRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.fillRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.drawRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.fillRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.drawCircle(102, 117, 15, BLACK);
  M5Cardputer.Display.fillCircle(102, 117, 15, ORANGE);
  if (M5Cardputer.Keyboard.isKeyPressed(KEY_ENTER)){
      if (!buttonPressed) {
          score++; 
          buttonPressed = true;
        }
    } else {
        buttonPressed = false;
    }
  std::this_thread::sleep_for(std::chrono::milliseconds(25));
  M5Cardputer.Display.clearDisplay();
  M5Cardputer.Display.setCursor(8, 13);  
  M5Cardputer.Display.printf("score = %d", score);
  M5Cardputer.Display.drawRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.fillRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.drawRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.fillRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.drawRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.fillRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.drawRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.fillRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.drawCircle(112, 117, 15, BLACK);
  M5Cardputer.Display.fillCircle(112, 117, 15, ORANGE);
  std::this_thread::sleep_for(std::chrono::milliseconds(25));
  M5Cardputer.Display.clearDisplay();
  M5Cardputer.Display.setCursor(8, 13);  
  M5Cardputer.Display.printf("score = %d", score);
  M5Cardputer.Display.drawRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.fillRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.drawRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.fillRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.drawRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.fillRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.drawRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.fillRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.drawCircle(122, 117, 15, BLACK);
  M5Cardputer.Display.fillCircle(122, 117, 15, ORANGE);
  std::this_thread::sleep_for(std::chrono::milliseconds(25));
  M5Cardputer.Display.clearDisplay();
  M5Cardputer.Display.setCursor(8, 13);  
  M5Cardputer.Display.printf("score = %d", score);
  M5Cardputer.Display.drawRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.fillRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.drawRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.fillRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.drawRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.fillRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.drawRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.fillRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.drawCircle(132, 117, 15, BLACK);
  M5Cardputer.Display.fillCircle(132, 117, 15, ORANGE);
  std::this_thread::sleep_for(std::chrono::milliseconds(95));
  M5Cardputer.Display.clearDisplay();
  M5Cardputer.Display.setCursor(8, 13);  
  M5Cardputer.Display.printf("score = %d", score);
  M5Cardputer.Display.drawRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.fillRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.drawRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.fillRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.drawRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.fillRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.drawRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.fillRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.drawCircle(142, 117, 15, BLACK);
  M5Cardputer.Display.fillCircle(142, 117, 15, ORANGE);
  std::this_thread::sleep_for(std::chrono::milliseconds(25));
  M5Cardputer.Display.clearDisplay();
  M5Cardputer.Display.setCursor(8, 13);  
  M5Cardputer.Display.printf("score = %d", score);
  M5Cardputer.Display.drawRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.fillRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.drawRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.fillRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.drawRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.fillRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.drawRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.fillRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.drawCircle(152, 117, 15, BLACK);
  M5Cardputer.Display.fillCircle(152, 117, 15, ORANGE);
  std::this_thread::sleep_for(std::chrono::milliseconds(95));
  M5Cardputer.Display.clearDisplay();
  M5Cardputer.Display.setCursor(8, 13);  
  M5Cardputer.Display.printf("score = %d", score);
  M5Cardputer.Display.drawRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.fillRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.drawRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.fillRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.drawRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.fillRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.drawRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.fillRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.drawCircle(162, 117, 15, BLACK);
  M5Cardputer.Display.fillCircle(162, 117, 15, ORANGE);
  std::this_thread::sleep_for(std::chrono::milliseconds(25));
  M5Cardputer.Display.clearDisplay();
  M5Cardputer.Display.setCursor(8, 13);  
  M5Cardputer.Display.printf("score = %d", score);
  M5Cardputer.Display.drawRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.fillRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.drawRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.fillRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.drawRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.fillRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.drawRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.fillRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.drawCircle(172, 117, 15, BLACK);
  M5Cardputer.Display.fillCircle(172, 117, 15, ORANGE);
  std::this_thread::sleep_for(std::chrono::milliseconds(25));
  M5Cardputer.Display.clearDisplay();
  M5Cardputer.Display.setCursor(8, 13);  
  M5Cardputer.Display.printf("score = %d", score);
  M5Cardputer.Display.drawRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.fillRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.drawRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.fillRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.drawRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.fillRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.drawRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.fillRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.drawCircle(182, 117, 15, BLACK);
  M5Cardputer.Display.fillCircle(182, 117, 15, ORANGE);
  std::this_thread::sleep_for(std::chrono::milliseconds(25));
  M5Cardputer.Display.clearDisplay();
  M5Cardputer.Display.setCursor(8, 13);  
  M5Cardputer.Display.printf("score = %d", score);
  M5Cardputer.Display.drawRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.fillRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.drawRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.fillRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.drawRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.fillRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.drawRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.fillRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.drawCircle(192, 117, 15, BLACK);
  M5Cardputer.Display.fillCircle(192, 117, 15, ORANGE);
  std::this_thread::sleep_for(std::chrono::milliseconds(25));
  M5Cardputer.Display.clearDisplay();
  M5Cardputer.Display.setCursor(8, 13);  
  M5Cardputer.Display.printf("score = %d", score);
  M5Cardputer.Display.drawRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.fillRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.drawRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.fillRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.drawRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.fillRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.drawRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.fillRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.drawCircle(202, 117, 15, BLACK);
  M5Cardputer.Display.fillCircle(202, 117, 15, ORANGE);
  std::this_thread::sleep_for(std::chrono::milliseconds(25));
  M5Cardputer.Display.clearDisplay();
  M5Cardputer.Display.setCursor(8, 13);  
  M5Cardputer.Display.printf("score = %d", score);
  M5Cardputer.Display.drawRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.fillRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.drawRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.fillRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.drawRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.fillRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.drawRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.fillRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.drawCircle(212, 117, 15, BLACK);
  M5Cardputer.Display.fillCircle(212, 117, 15, ORANGE);
  std::this_thread::sleep_for(std::chrono::milliseconds(25));
  M5Cardputer.Display.clearDisplay();
  M5Cardputer.Display.setCursor(8, 13);
  M5Cardputer.Display.printf("score = %d", score);
  M5Cardputer.Display.drawRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.fillRect(75, 0, 85, 29, YELLOW);
  M5Cardputer.Display.drawRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.fillRect(105, 21, 30, 35, WHITE);
  M5Cardputer.Display.drawRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.fillRect(-5, 108, 252, 45, RED);
  M5Cardputer.Display.drawRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.fillRect(103, 105, 10, 31, GREEN);
  M5Cardputer.Display.drawCircle(222, 117, 15, BLACK);
  M5Cardputer.Display.fillCircle(222, 117, 15, ORANGE);



}

// put function definitions here:
int myFunction(int x, int y) {
  return x + y;
}